var img2,lat2,lon2,latlng,labelFlag,offSiteX=-1532e-8,offSiteY=5708e-8,i=0,map2=L.map("map2"),tiles=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(map2),popupMapLongLat2=L.popup();function onMapClick2(e){popupMapLongLat2.setLatLng(e.latlng).setContent("Coordenadas en el mapa "+e.latlng.toString()).openOn(map2)}var places=[];places[0]=[],places[1]=[],places[2]=[],places[3]=[],places[4]=[];var options,angleMarker,angle,marker2=null,line2=L.polyline([]).addTo(map2);function redraw(e,a,l,n,t){switch(places[0].push(a),places[1].push(e),places[2].push(l),places[3].push(n),places[4].push(t),t){case 1:t="images/eaglemobile_carnormal.png";break;case 2:t="images/eaglemobile_alarm.png";break;case 3:t="images/eaglemobile_engineon.png";break;case 4:t="/images/eaglemobile_lowsignal.png";break;case 5:t="images/eaglemobile_driving.png"}var o=L.icon({iconUrl:t,iconSize:[41,41],shadowSize:[41,41],iconAnchor:[21,42],shadowAnchor:[14,41],tooltipAnchor:[0,-42]});null==marker2&&(marker2=L.marker([e,a],{icon:o,zIndexOffset:0}).addTo(map2).setIcon(o)),line2.addLatLng([e,a]),i>0&&marker2.setLatLng([places[1][i-1],places[0][i-1]]).addTo(map2).unbindTooltip().setIcon(o),marker2.setLatLng([e,a],{icon:o,zIndexOffset:0}).addTo(map2).setIcon(o).bindTooltip(l+"<br>"+n+"KM/H",{permanent:!0,interactive:!0,direction:"top"}).on("move",(function(e){var a=marker2.getLatLng();map2.setView(a,15)})),i>0&&((img2=new Image).src="images/arrow.png",lat2=places[1][i-1]+offSiteY,lon2=places[0][i-1]-offSiteX,latlng={lat:lat2,lon:lon2},options={label:1,labelFlag:!1,labelColor:"black",img:img2},angleMarker=L.angleMarker(latlng,options),angle=0,previousLatLng={lat:places[1][i-1],lon:places[0][i-1]},nextLanLng={lat:places[1][i],lon:places[0][i]},angle=angleMarker.getAngle(previousLatLng,nextLanLng),angleMarker.setHeading(angle),map2.addLayer(angleMarker)),i++}map2.on("click",onMapClick2);
